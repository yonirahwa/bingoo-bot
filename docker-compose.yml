version: '3.8'

services:
  postgres:
    image: postgres:15-alpine
    environment:
      POSTGRES_DB: bingo_bot
      POSTGRES_USER: bingo_user
      POSTGRES_PASSWORD: bingo_password
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data

 backend:
  build:
    context: .
    dockerfile: Dockerfile
  command: python backend/app.py
  ports:
    - "8000:8000"
  environment:
    DATABASE_URL: postgresql://bingo_user:bingo_password@postgres:5432/bingo_bot
    TELEGRAM_BOT_TOKEN: ${TELEGRAM_BOT_TOKEN}
  depends_on:
    - postgres
  volumes:
    - ./backend:/app/backend
    - ./uploads:/app/uploads
